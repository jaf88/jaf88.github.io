<!DOCTYPE html>
<html lang="en">
<head>
  <title>Administração </title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link href="../../aula18/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="../css/css.css">
  <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"> -->
  <!-- Include all compiled plugins (below), or include individual files as needed -->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.0/Chart.bundle.js"></script>
  <script src="../js/Chart.bundle.js"></script>
  <script src="../js/utils.js"></script>
  <style>
   canvas {
       -moz-user-select: none;
       -webkit-user-select: none;
       -ms-user-select: none;
   }
   </style>
</head>
<body>

  <div class="container">
    <nav class="navbar navbar-inverse">
      <div class="container-fluid">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed"
            data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">LOGO</a>
        </div>
        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav">
            <li><a href="control.html">Painel de Controle</a></li>
            <li class="active"><a href="cursos.html">Cursos</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle"
                data-toggle="dropdown">Minha Conta <span class="caret"></span> </a>

                <ul class="dropdown-menu">
                  <li> <a href="#" class="glyphicon glyphicon-edit"> Editar</a> </li>
                  <li><a href="../index.html" class="glyphicon glyphicon-off"> Sair</a></li>
                </ul>
          </ul>
        </div>
      </div>
    </nav>

    <h1>Administração</h1>

    <div id="container" style="width: 75%;">
       <canvas id="canvas"></canvas>
   </div>
   <button id="randomizeData">Randomize Data</button>
   <button id="addDataset">Add Dataset</button>
   <button id="removeDataset">Remove Dataset</button>
   <button id="addData">Add Data</button>
   <button id="removeData">Remove Data</button>
   <script>
       var MONTHS = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];
       var color = Chart.helpers.color;
       var barChartData = {
           labels: ["January", "February", "March", "April", "May", "June", "July"],
           datasets: [{
               label: 'Dataset 1',
               backgroundColor: color(window.chartColors.red).alpha(0.5).rgbString(),
               borderColor: window.chartColors.red,
               borderWidth: 1,
               data: [
                   randomScalingFactor(),
                   randomScalingFactor(),
                   randomScalingFactor(),
                   randomScalingFactor(),
                   randomScalingFactor(),
                   randomScalingFactor(),
                   randomScalingFactor()
               ]
           }, {
               label: 'Dataset 2',
               backgroundColor: color(window.chartColors.blue).alpha(0.5).rgbString(),
               borderColor: window.chartColors.blue,
               borderWidth: 1,
               data: [
                   randomScalingFactor(),
                   randomScalingFactor(),
                   randomScalingFactor(),
                   randomScalingFactor(),
                   randomScalingFactor(),
                   randomScalingFactor(),
                   randomScalingFactor()
               ]
           }]

       };

       window.onload = function() {
           var ctx = document.getElementById("canvas").getContext("2d");
           window.myBar = new Chart(ctx, {
               type: 'bar',
               data: barChartData,
               options: {
                   responsive: true,
                   legend: {
                       position: 'top',
                   },
                   title: {
                       display: true,
                       text: 'Chart.js Bar Chart'
                   }
               }
           });

       };

       document.getElementById('randomizeData').addEventListener('click', function() {
           var zero = Math.random() < 0.2 ? true : false;
           barChartData.datasets.forEach(function(dataset) {
               dataset.data = dataset.data.map(function() {
                   return zero ? 0.0 : randomScalingFactor();
               });

           });
           window.myBar.update();
       });

       var colorNames = Object.keys(window.chartColors);
       document.getElementById('addDataset').addEventListener('click', function() {
           var colorName = colorNames[barChartData.datasets.length % colorNames.length];;
           var dsColor = window.chartColors[colorName];
           var newDataset = {
               label: 'Dataset ' + barChartData.datasets.length,
               backgroundColor: color(dsColor).alpha(0.5).rgbString(),
               borderColor: dsColor,
               borderWidth: 1,
               data: []
           };

           for (var index = 0; index < barChartData.labels.length; ++index) {
               newDataset.data.push(randomScalingFactor());
           }

           barChartData.datasets.push(newDataset);
           window.myBar.update();
       });

       document.getElementById('addData').addEventListener('click', function() {
           if (barChartData.datasets.length > 0) {
               var month = MONTHS[barChartData.labels.length % MONTHS.length];
               barChartData.labels.push(month);

               for (var index = 0; index < barChartData.datasets.length; ++index) {
                   //window.myBar.addData(randomScalingFactor(), index);
                   barChartData.datasets[index].data.push(randomScalingFactor());
               }

               window.myBar.update();
           }
       });

       document.getElementById('removeDataset').addEventListener('click', function() {
           barChartData.datasets.splice(0, 1);
           window.myBar.update();
       });

       document.getElementById('removeData').addEventListener('click', function() {
           barChartData.labels.splice(-1, 1); // remove the label first

           barChartData.datasets.forEach(function(dataset, datasetIndex) {
               dataset.data.pop();
           });

           window.myBar.update();
       });
   </script>



    <footer class="container-fluid text-center">
      <p>Joaquim Alves &copy;</p>
    </footer>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
  <!-- Include all compiled plugins (below), or include individual files as needed -->
  <script src="../../aula18/bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
